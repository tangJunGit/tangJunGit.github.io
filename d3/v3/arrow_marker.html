<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer" content="webkit"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="#">
    <title>箭头</title>
    <style type="text/css">
        svg.arrowMarker{
            background: #eee; 
        }
    </style>
</head>
<body>

<svg class="arrowMarker" width="400" height="400"></svg>

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script type="text/javascript">
    // 获取画布信息
    var svg = d3.select('svg.arrowMarker');
    var width = svg.attr('width');
    var height = svg.attr('height');
    
    // 定义箭头的标识
    var defs = svg.append("defs");

    var arrowMarker = defs.append("marker")
                          .attr("id", "arrow")
                          .attr("markerUnits", "strokeWidth")
                          .attr("markerWidth", "12")          // 标记的宽度（默认3）
                          .attr("markerHeight", "12")         // 标记的高度（默认3）
                          .attr("viewBox", "0 0 12 12")       // 这个SVG绘图区域 (min x, min y, width, height)
                          .attr("refX", "6")                  // 标记顶点连接的位置（默认为0）
                          .attr("refY", "6")                  // 标记顶点连接的位置（默认为0）
                          .attr("orient", "auto");            // 'auto' 始终显示标记的角度

    var arrow_path = "M2,2 L10,6 L2,10 L6,6 L2,2";
                
    arrowMarker.append("path")
                .attr("d", arrow_path)
                .attr("fill", "#000");

    //绘制直线
    var line = svg.append("line")
                   .attr("x1",0)
                   .attr("y1",0)
                   .attr("x2",200)
                   .attr("y2",50)
                   .attr("stroke","red")
                   .attr("stroke-width",2)
                   .attr("marker-end","url(#arrow)");

    //绘制曲线
    var curve_path = "M20,70 T80,100 T160,80 T200,90";

    var curve = svg.append("path")
                   .attr("d",curve_path)
                   .attr("fill","white")
                   .attr("stroke","red")
                   .attr("stroke-width",2)
                   .attr("marker-start","url(#arrow)")
                   .attr("marker-mid","url(#arrow)")
                   .attr("marker-end","url(#arrow)"); 
</script>
</body>
</html>